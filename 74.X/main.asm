  	LIST p=16F18877
	#include<p16F18877.inc>
	
	__CONFIG _CONFIG1, _FEXTOSC_HS & _RSTOSC_EXT1X
	__CONFIG _CONFIG2, _BOREN_ON & _PPS1WAY_OFF
	__CONFIG _CONFIG3, _WDTE_OFF
	__CONFIG _CONFIG5, _CP_OFF & _CPD_OFF
	
COUNT	EQU	0x20
	
	ORG	00H
	GOTO	START
	ORG	04H
	GOTO	INTSUB
	
START:	MOVLB	.17
	MOVLW	0x70
	MOVWF	OSCCON1
	MOVLW	0x04
	MOVWF	OSCFRQ
	
	MOVLB	.11
	BSF	INTCON,GIE
	BSF	INTCON,PEIE
	
	MOVLB	.5
	MOVLW	0xCF
	MOVWF	T2CON
	MOVLW	0x01
	MOVWF	T2CLKCON
	MOVLW	0xFE
	MOVWF	T2PR
	MOVLW	0x00
	MOVWF	T2TMR
	
	MOVLB	.0
	CLRF	TRISD
	MOVLW	B'11111111'
	MOVWF	LATD
	
	MOVLB	.14
	BCF	PIR4,TMR2IF
	BSF	PIE4,TMR2IE
	
WAIT:	NOP
	GOTO	WAIT
	
INTSUB:	MOVLB	.0
	DECFSZ	COUNT,F
	GOTO	ISR_END
	COMF	LATD,F
	MOVLW	.10
	MOVWF	COUNT
ISR_END:
	MOVLB	.14
	BCF	PIR4,TMR2IF
	MOVLB	.5
	MOVLW	0xFE
	MOVWF	T2PR
	MOVLW	0x00
	MOVWF	T2TMR
	RETFIE
	
	END